# STUDYSULGI
이 글에서는 VariableTrigger V1 에 대한 내용을 다룹니다.
이는 신규 개발자들이 VariableTrigger 를 이용하여 새로운 기능을 구현하는 한편,
기존 개발자가 개발하는데에 있어서 참고하기 위한 Reference 의 역할을 합니다.

# 저작권의 표시
이 글의 기본 저작권은 Bukkit 에게 있으며, 설명 및 사용 예시는 @mastersulgi 에게 있습니다만, 편하게 레퍼런스 하셔도 무방합니다.

# 시작
https://dev.bukkit.org/projects/variabletriggers

- 공식 홈페이지에서 제공하고 있는 VariableTriggers 에 대한 정보.
- 현재 VTV1, VTV2 두 개의 버전이 있지만, VTV2 는 만들어놓거나 작성해놓은 스크립트 및 파일이 날아가는 오류가 있어서 본 글은 VTV1 을 기준으로 설명합니다.

# 플러그인에 대한 설명
VariableTriggers 는 스크립트 계열 플러그인 중에서 가장 기능을 구현하기 쉬운 대신 확장성이 떨어진다는 단점을 가지고 있습니다. 한국에서 사용되는 Skript 플러그인 및 TriggerReactor 와 같은 플러그인은 경우에 따라서 내부에 변수를 저장해두었다가 필요한 경우 꺼내오는 것이 가능한데, VariableTriggers 는 그러한 방식을 쓰는 것이 대단히 제한적입니다.

따라서 VariableTriggers 를 사용하여 무언가를 구현할때는 굉장히 원초적인 접근을 할 필요가 있습니다. '이런 부분까지 코딩을 해줘야 하나?' 라는 의구심이 든다면, 일단 코딩을 해주고 나서 나중에 수정하는 것이 문제가 적습니다.

현재는 VariableTriggers V1, V2 모두 새로운 기능이 업데이트되고 있지 않으니 추후 플러그인의 오류가 수정될 가능성은 사실 상 없다시피하나, VariableTriggers V1 의 경우 출시된 이례 지금까지 쭉 완성형 플러그인이었기 때문에 기본적인 문법(syntax) 를 익히고 이를 활용하여 새로운 기능을 구현하기가 대단히 용이합니다.

# 개발을 시작하기에 앞서: 마인드셋
이 단락은 VariableTriggers 플러그인을 사용하는데에 있어서의 마인드셋이라기 보다는, '코딩을 통해 내가 원하는 기능을 구현하는 것' 에 초점을 맞춘다고 보시면 됩니다. 일반적으로 처음 코딩을 시작하는 분들이 인터넷 블로그나 웹사이트, 책에 나와있는 내용을 그대로 따라 적은 뒤 이를 실행하고, 나오는 결과값을 외운 뒤 '이런 결과값이 나오게 코딩할 줄 안다' 라고 착각하시는 경우가 있습니다.

이는 아주 간단한 기능을 구현하는데에 있어서는 효율적일지 모르겠으나, 복잡하고 다양한 기능을 모두 이용해야 하는 경우에는 앞서 책이나 블로그에 나와있는 코드를 그대로 적고 원하는 결과값이 나오지 않아 당황스러울 수 있습니다. 따라서 필자는 코딩을 하는데에 있어서 다음과 같은 마인드셋을 가질 것을 제안합니다:

- 내가 원하는 기능이 작동하는 원리를 먼저 생각해보자.
- 내가 만들고자 하는 기능이 이미 어디선가 제공되고 있는지 알아보자.

내가 구현하고자 하는 기능이 작동하는 원리를 그림으로 그려도 좋고, 글로 써도 좋습니다. 일반적으로 이러한 과정을 '모식도를 그린다' 고 표현합니다만, 중요한 건 '스스로가 만들고 있는 걸 어떤 원리로서 돌아가게 할 것인가?' 를 끊임없이 생각하는 것입니다.

내가 만들고자 하는 기능이 이미 어디선가 제공되고 있는 내용이라면, 해당 내용을 레퍼런스 삼아도 크게 상관이 없습니다. 단지, 처음에 언급한 '원리의 이해' 가 반드시 이행되어야 합니다. 원리를 이해하지 않고 코드를 복사해서 붙여넣기만 한다면, 똑같은 문제에 직면했을때라면 몰라도 이를 응용한 비슷하지만 다른 상황에 무기력해질 수 있습니다.

# VariableTriggers 의 기능
VariableTriggers 에는 Area / Click / Command / Event / Inventory / Walk 의 총 6가지 이벤트에 대한 트리거를 작성할 수 있습니다. 각각의 이벤트에 따라 사용할 수 있는 기능도 다르며, 작동하는 방식도 다릅니다.

그리고 6가지 종류의 트리거를 모두 다룰 수 있는 Script 트리거를 작성할 수 있습니다. 본 글에서는 이 Script 를 이용하거나 다루지는 않을 예정이지만, 언젠가 여건이 된다면 이 부분에 대해서도 충분히 설명을 추가하도록 하겠습니다.

# AreaTriggers
우리가 Minecraft 멀티플레이 서버를 열 때 많이 사용해본 플러그인 중 "WorldEdit" 이라는 플러그인이 있습니다. 아마 이 글을 읽어주시는 대부분의 분들은 아시는 플러그인일텐데, 이 플러그인은 나무 도끼를 완드로 이용하여 pos1, pos2 를 지정하고, 해당 위치에 대한 명령값을 입력하면 블럭이 replacement 되는 구조로 설계된 플러그인입니다.

VariableTriggers 내에 있는 이벤트중 Area, Click, Walk 의 이벤트를 다룰 때에도 "WorldEdit" 플러그인 처럼 특별한 완드가 필요한데, 월드에딧 플러그인과는 다르게 뼈 아이템을 사용합니다. 따라서 이 글에서 다루는 내용들을 수행하기 위해서는 반드시 뼈 아이템을 1개 이상 가지고 있어야 합니다.

채팅창에 /vt setarea 라고 입력하게 되면, 가지고 있던 뼈 아이템을 완드로 이용하여 pos1, pos2 를 지정할 수 있게 됩니다. 일반적으로 pos1은 지정하고자 하는 영역의 왼쪽 윗 꼭짓점, pos2는 지정하고자 하는 영역의 오른쪽 아랫 꼭짓점을 선택하긴 합니다만, 이는 내가 어떠한 트리거를 지정하기 위한 영역을 설정하기만 하면 되므로 전혀 상관이 없습니다.

pos1과 pos2가 지정되면, /vt definearea [areaname] 을 입력함으로써 지정된 영역을 [areaname] 으로 정의할 수 있습니다. 이 때 실제 명령어를 입력할 때에는 [] 는 빼고, areaname 은 자신이 원하는 영역의 이름으로 적으면 AreaTriggers 를 이용할 준비가 완료됩니다.

AreaTriggers 는 두 가지의 가장 큰 조건을 가지고 있습니다.
- 지정된 영역에 들어왔는가? (ENTER)
- 지정된 영역에서 나갔는가? (EXIT)

즉 내가 지정한 영역에 들어왔을 때 수행할 명령과, 내가 지정한 영역에서 나갔을 때 수행할 명령을 지정할 수 있는 트리거라고 보면 됩니다. 가령 누군가가 내가 spawnpoint 라고 설정해놓은 영역에 들어오면 어서 오세요! 라고, 이 영역에서 나갔을 때는 안녕히 가세요! 라고 출력하고자 한다면:

/vt setarea - pos1, pos2 지정
/vt definearea spawnpoint - pos1, pos2 를 통해 지정된 영역을 spawnpoint 로 정의
/vta spawnpoint ENTER @PLAYER 어서 오세요! - spawnpoint 로 정의된 영역에 들어왔을 경우 들어온 플레이어에게 어서 오세요! 라는 메세지를 출력하고,
/vta spawnpoint EXIT @PLAYER 안녕히 가세요! - spawnpoint 로 정의된 영역에서 나갔을 경우 나간 플레이어에게 안녕히 가세요! 라는 메세지를 출력함.

이렇게 4줄의 명령어를 입력함으로써 새로운 AreaTriggers 를 생성하는데에 성공한 것입니다.

